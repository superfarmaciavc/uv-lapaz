<script>
  const lat = -16.5;
  const lon = -68.15;
  const apiKey = "TU_API_KEY"; // reemplazar

  async function cargarDatos() {
    try {
      const url = `https://api.openweathermap.org/data/3.0/onecall?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric&lang=es`;
      const res = await fetch(url);
      const data = await res.json();

      // UV Index
      const uv = data.current.uvi;
      document.getElementById("uv").innerText = uv.toFixed(2);

      let nivel = "ğŸ”µ Bajo";
      if (uv >= 3 && uv <= 5) nivel = "ğŸŸ¢ Moderado";
      if (uv >= 6 && uv <= 7) nivel = "ğŸŸ¡ Alto";
      if (uv >= 8 && uv <= 10) nivel = "ğŸŸ  Muy alto";
      if (uv >= 11) nivel = "ğŸ”´ Extremo";

      document.getElementById("nivel").innerText = `Nivel: ${nivel}`;

      // Clima
      const estado = data.current.weather[0].main.toLowerCase();
      const temp = Math.round(data.current.temp);

      let emojiClima = "â˜€ï¸";
      if (estado.includes("cloud")) emojiClima = "â˜ï¸";
      if (estado.includes("rain")) emojiClima = "ğŸŒ§ï¸";
      if (estado.includes("thunder")) emojiClima = "â›ˆï¸";
      if (estado.includes("snow")) emojiClima = "â„ï¸";
      if (estado.includes("fog") || estado.includes("mist")) emojiClima = "ğŸŒ«ï¸";
      if (estado.includes("clear")) emojiClima = "â˜€ï¸";

      document.getElementById("iconoClima").innerText = emojiClima;
      document.getElementById("temp").innerText = `${temp}Â°C`;

    } catch (err) {
      document.getElementById("nivel").innerText = "âš ï¸ Error al cargar";
    }
  }

  cargarDatos();
  setInterval(cargarDatos, 3600000);
</script>
