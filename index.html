<script>
  const lat = -16.5;
  const lon = -68.15;
  const apiKey = "TU_API_KEY"; // reemplazar

  async function cargarDatos() {
    try {
      const url = `https://api.openweathermap.org/data/3.0/onecall?lat=${lat}&lon=${lon}&appid=${apiKey}&units=metric&lang=es`;
      const res = await fetch(url);
      const data = await res.json();

      // UV Index
      const uv = data.current.uvi;
      document.getElementById("uv").innerText = uv.toFixed(2);

      let nivel = "🔵 Bajo";
      if (uv >= 3 && uv <= 5) nivel = "🟢 Moderado";
      if (uv >= 6 && uv <= 7) nivel = "🟡 Alto";
      if (uv >= 8 && uv <= 10) nivel = "🟠 Muy alto";
      if (uv >= 11) nivel = "🔴 Extremo";

      document.getElementById("nivel").innerText = `Nivel: ${nivel}`;

      // Clima
      const estado = data.current.weather[0].main.toLowerCase();
      const temp = Math.round(data.current.temp);

      let emojiClima = "☀️";
      if (estado.includes("cloud")) emojiClima = "☁️";
      if (estado.includes("rain")) emojiClima = "🌧️";
      if (estado.includes("thunder")) emojiClima = "⛈️";
      if (estado.includes("snow")) emojiClima = "❄️";
      if (estado.includes("fog") || estado.includes("mist")) emojiClima = "🌫️";
      if (estado.includes("clear")) emojiClima = "☀️";

      document.getElementById("iconoClima").innerText = emojiClima;
      document.getElementById("temp").innerText = `${temp}°C`;

    } catch (err) {
      document.getElementById("nivel").innerText = "⚠️ Error al cargar";
    }
  }

  cargarDatos();
  setInterval(cargarDatos, 3600000);
</script>
